<div class="home-container">
    <header class="app-header">
        <div class="logo">MyPics</div>
        <div class="actions">
            <label class="btn-upload">
                <input type="file" multiple accept=".jpg,.jpeg,.png" (change)="onFileSelected($event)" hidden />
                <span>+ Upload Photos</span>
            </label>
            <button class="btn-logout" (click)="logout()">Logout</button>
        </div>
    </header>

    <main class="gallery-content">
        <div class="masonry-grid" *ngIf="files.length > 0; else noFiles">
            <div class="masonry-item" *ngFor="let file of files; let i = index">
                <div class="image-card" (click)="openGallery(i)">
                    <img [src]="file.url || file.filePath" [alt]="file.originalName" loading="lazy" />
                    <div class="overlay">
                        <button class="btn-delete" (click)="deleteFile(file.id, $event)" title="Delete Image">
                            &times;
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <ng-template #noFiles>
            <div class="empty-state">
                <p>No photos yet. Upload some to get started!</p>
            </div>
        </ng-template>

        <div class="loading-overlay" *ngIf="isUploading">
            <div class="spinner"></div>
            <p>Uploading...</p>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal-backdrop" *ngIf="showDeleteModal">
            <div class="modal-card">
                <h3>Delete File?</h3>
                <p>Are you sure you want to delete this file? This action cannot be undone.</p>
                <div class="modal-actions">
                    <button class="btn-cancel" (click)="cancelDelete()">Cancel</button>
                    <button class="btn-danger" (click)="confirmDelete()">Delete</button>
                </div>
            </div>
        </div>

        <!-- PrimeNG Galleria -->
        <!-- PrimeNG Galleria -->
        <!-- <p-galleria [value]="files" [(visible)]="displayCustom" [activeIndex]="selectedImageIndex"
            (activeIndexChange)="onActiveIndexChange($event)" [responsiveOptions]="responsiveOptions"
            [baseZIndex]="10000" [numVisible]="7" [circular]="true" [fullScreen]="true" [showItemNavigators]="true"
            [showThumbnails]="false" [showIndicators]="true">
            <ng-template pTemplate="item" let-item>
                <img [src]="item.url || item.filePath" [alt]="item.originalName"
                    style="width: 100%; display: block; max-height: 90vh; object-fit: contain; margin: 0 auto;" />
            </ng-template>
            <ng-template pTemplate="caption" let-item>
                <h4 style="margin-bottom: .5rem; color: #ffffff; text-align: center;">{{item.originalName}}</h4>
            </ng-template>
        </p-galleria> -->



        <p-galleria [value]="files" [(visible)]="displayCustom" [(activeIndex)]="selectedImageIndex"
            [responsiveOptions]="responsiveOptions" [baseZIndex]="10000" [numVisible]="7" [circular]="true"
            [fullScreen]="true" [showItemNavigators]="true" [showThumbnails]="false" [showIndicators]="true">
            <ng-template pTemplate="item" let-item>
                <img [src]="item.url || item.filePath" [alt]="item.originalName" style="
                width: 100%;
                display: block;
                max-height: 90vh;
                object-fit: contain;
                margin: 0 auto;
            " />
            </ng-template>

            <ng-template pTemplate="caption" let-item>
                <h4 style="margin-bottom: 0.5rem; color: #ffffff; text-align: center;">
                    {{ item.originalName }}
                </h4>
            </ng-template>
        </p-galleria>

    </main>
</div>